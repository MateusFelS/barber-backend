generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model User {
  id                 Int           @id @default(autoincrement())
  email              String        @unique
  password           String
  name               String
  role               Role
  appointments       Appointment[] @relation("UserAppointments")
  barberAppointments Appointment[] @relation("BarberAppointments")
}

model Appointment {
  id         Int        @id @default(autoincrement())
  date       DateTime
  userId     Int
  serviceId  Int
  barberId   Int
  user       User       @relation(name: "UserAppointments", fields: [userId], references: [id])
  service    Service    @relation(fields: [serviceId], references: [id])
  barber     User       @relation(name: "BarberAppointments", fields: [barberId], references: [id])
  payment    Payment?
}

model Service {
  id          Int           @id @default(autoincrement())
  name        String
  description String?
  price       Float
  appointments Appointment[]
}

model Payment {
  id             Int         @id @default(autoincrement())
  amount         Float
  date           DateTime
  appointmentId  Int         @unique
  appointment    Appointment @relation(fields: [appointmentId], references: [id])
}

enum Role {
  CUSTOMER
  BARBER
}
